<div class="w-full flex flex-wrap mx-auto gap-3">
  <% reviews.each do |review| %>
    <div class="mx-auto">
      <div class="text-center bg-twibg rounded-md pb-1 xs:w-40 md:w-60 lg:w-72">
        <%= link_to item_path(review.item.id), data: {"turbolinks" => false} do %>
          <%= image_tag review.item.image.variant(resize: "600x600^", gravity: "center", crop: "600x600+0+0").processed, class: 'xs:w-40 md:w-60 lg:w-72 xs:mx-auto rounded-md' %>
        <% end %>
        <p class="font-bold whitespace-nowrap text-center pt-3 text-gray-300"><%= review.item.name %></p>
        <p class="flex mt-3 justify-center" id="star2<%= review.id %>"></p>
        <p class="mb-2 text-gray-400 text-center mt-3"><%= review.rate %></p>
        <p class="xs:text-xs md:text-base text-gray-400 mx-auto lg:w-72 px-5 mb-3 line-clamp-3">
          <a class="js-modal-open break-words hover:opacity-75" data-target="#modal_<%= review.id %>" href=""><%= review.comment %></a>
        </p>

        <script>
          $('#star2<%= review.id %>').empty();
          $('#star2<%= review.id %>').raty({
            size      : 36,
            starOff   : '<%= asset_path('star-off.png') %>',
            starHalf: '<%= asset_path('star-half.png') %>',
            starOn    : '<%= asset_path('star-on.png') %>',
            half      : false,
            readOnly: true,
            score: <%= review.rate %>,
            });
        </script>
      </div>
    </div>
    <%= render '/users/modal', review: review %>
  <% end %>
</div>

<script>
  $(function(){
   $('.js-modal-open').on('click',function(){
     $($(this).data('target')).fadeIn();
     return false;
   });
   $('.js-modal-close').on('click',function(){
     $('.js-modal').fadeOut();
     return false;
   });
  });
</script>